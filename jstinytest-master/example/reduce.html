<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Reduce TDD</title>
		<script src="../tinytest.js"></script>
		<script>
		  // Prototype implementation.
				// function reduce(array, callback, startingValue) {
				// 	var resultSoFar = startingValue;
				// 	for (var i = 0; i < array.length; i++) {
				// 		resultSoFar = callback(resultSoFar, array[i], i , array);
				// 	}
				// 	return resultSoFar;
				// }

			//Function signiture
				// reduce(array, callback[, initialValue])
			
			// Callback parameters:
				// previousValue
				// currentValue
				// currentIndex
				// array 

			// Return value:
			// Returns a single value.

			// Notes: Object.keys([,,]).length === 0

			function reduce(array, callback, initialValue) {
				var startingIndex = 0;
				var resultSoFar = initialValue;

				// No initialValue;
				if (arguments.length < 3) {
					resultSoFar = array[startingIndex];					
					startingIndex++;
					// Has initialValue
				} else {
					if (Object.keys(array).length === 0) {
						return initialValue;
					}
				}
				for (var i = startingIndex; i < array.length; i++) {
					callback(resultSoFar, array[i], i);
				}
			}

			tests({
				'If initialValue, callback should run array.length times.': function() {
					var numberOfTimesCallbackHasRun = 0;
					reduce([1], function() {
						numberOfTimesCallbackHasRun++;
					}, 0);
					eq(numberOfTimesCallbackHasRun, 1);
				},
				'If no initialValue, callback should run array.length -1.': function() {
					var numberOfTimesCallbackHasRun = 0;
					reduce([1], function() {
						numberOfTimesCallbackHasRun++;
					});
					eq(numberOfTimesCallbackHasRun, 0);
				},

				'If initialValue, previousValue should start with initialValue.': function() {
					reduce([1], function(previousValue) {
						eq(previousValue, 0);
					}, 0);
				},
				'If initialValue, currentValue should start with array[0].': function() {
					reduce([1], function(previousValue, currentValue) {
						eq(currentValue, 1);
					}, 0);
				},
				'If initialValue, callback will start at index 0': function() {
					reduce([1], function(previousValue, currentValue, currentIndex) {
						eq(currentIndex, 0);
					}, 0);
				},

				'If no initialValue, previousValue should start with array[0]': function() {
					reduce([1, 2], function(previousValue) {
						eq(previousValue, 1);
					});
				},
				'If no initialValue, currentValue should start with array[1]': function() {
					reduce([1, 2], function(previousValue, currentValue) {
						eq(currentValue, 2);
					});
				},
				'If no initialValue, callback will start at index 1': function() {
					reduce([1, 2], function(previousValue, currentValue, currentIndex) {
						eq(currentIndex, 1);
					});
				},

				'If initialValue and array is empty, return initialValue without calling callback.': function() {
					  var numberOfTimesCallbackHasRun = 0;
						var initialValue = 0;
						var reduceResult = reduce([,,], function() {
							numberOfTimesCallbackHasRun++;
						}, initialValue);
						eq(reduceResult, initialValue);
						eq(numberOfTimesCallbackHasRun, 0);
				},
				'If no initialValue and array has one element, it should return only element without calling callback.': function() {
					fail();
				},

				'It should actually reduce.': function() {
					fail();
				},
				'It should exclude holes.': function() {
					fail();
				},
				'If array is empty, and no initialValue, throw TypeError.': function() {
					fail();
				},
				'It should pass array as fourth argument to callback.': function() {
					fail();
				}
			});







		</script>
</head>
<body>
	
</body>
</html>